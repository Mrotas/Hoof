@using Common
@using Domain.AnnualPlan.Models.GamePlan
@model Domain.AnnualPlan.ViewModels.AnnualPlanViewModel

@{
    ViewBag.Title = "Index";
}

@section scripts
{
    @Scripts.Render("~/bundles/jqueryval")

    <link rel="stylesheet" href="~/Content/AnnualPlan/AnnualPlanStyles.css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.51/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.51/vfs_fonts.js"></script>
    <script type="text/javascript" src="~/Scripts/AnnualPlan/AnnualPlanPdfGenerator.js"></script>
    <script type="text/javascript">

        $('#bodyContainer').css('width', '75%');

        $(document).ready(function() {
            $('#bigGameTable tr').each(function() {
                $.each(this.cells,
                    function(i, item) {
                        var text = item.innerText;
                        if (text === "0") {
                            item.innerText = "";
                        }
                    });
            });
        });

        $(document).ready(function() {
            $('#smallGameTable tr').each(function() {
                $.each(this.cells,
                    function(i, item) {
                        var text = item.innerText;
                        if (text === "0") {
                            item.innerText = "";
                        }
                    });
            });
        });

        $(document).ready(function() {
            var config = {};
            config.marketingYearId = 3;
            var annualPlanGenerator = new AnnualPlanGenerator(config);
        });

    </script>
}

<button class="btn btn-danger" id="generateAnnualPlanPdf">Pobierz PDF</button>
<h2 style="text-align: center; font-weight: bold">ROCZNY PLAN ŁOWIECKI</h2>
<h3 style="text-align: center; font-weight: bold">@($"na rok gospodarczy {Model.CurrentMarketingYearModel}")</h3>
<h3 style="text-align: center; font-weight: bold">@($"oraz sprawozdanie z wykonania planu roku gospodarczego {Model.PreviousMarketingYearModel}")</h3>

<br />

<h3 style="font-weight: bold">I. Dane ogólne</h3>
<h4>1. Obwód łowiecki nr ........ powierzchnia ......... ha, w tym powierzchnia gruntów leśnych .......... ha powierzchnia po wyłączeniach, o których mowa w art. 26 ustawy z 13.X.1995r. Prawo Łowieckie ......... ha</h4>
<h4>2. Wojewódzctwo .........................................................................., Powiat................................................................................................................</h4>
<h4>3. Nadleśnictwo (nazwa i adres siedziby) .........................................................................................................................................................................</h4>
<h4>4. Regionalna Dyrekcja Lasów Państwowych (nazwa i adres siedziby) ................................................................................................................................................</h4>
<h4>5. Zarząd Okręgowy PZŁ (nazwa i adres siedziby) ..................................................................................................................................................................</h4>
<h4>6. Dzierżawca/lub zarządca (nazwa i adres siedziby) ..............................................................................................................................................................</h4>

<br />

<h3 style="font-weight: bold">II. Zagospodarowanie obwodu łowieckiego, szkody łowieckie</h3>
<table class="table-bordered annualPlanTable" id="annualPlanTable">
    <tr>
        <th>@Text.Specification</th>
        <th class="unit">@Text.Unit</th>
        <th class="long-header">@String.Format(Text.PreviousEconomyPlan, Model.PreviousMarketingYearModel)</th>
        <th class="long-header">@String.Format(Text.PreviousPlanExecution, Model.PreviousMarketingYearModel)</th>
        <th class="long-header">@String.Format(Text.March10Condition, Model.CurrentMarketingYearModel.Start.Year)</th>
        <th class="long-header">@String.Format(Text.CurrentYearPlan, Model.CurrentMarketingYearModel)</th>
    </tr>
    <tr>
        <td class="column_number" style="text-align: center">1</td>
        <td class="column_number">2</td>
        <td class="column_number">3</td>
        <td class="column_number">4</td>
        <td class="column_number">5</td>
        <td class="column_number">6</td>
    </tr>
    <tr>
        <td class="paragraph">1. @Text.ContractEmployees</td>
        <td>@Text.UnitPersonPartTime</td>
        <td>@Model.PreviousAnnualPlanModel.EmployeePlanModel.FullTimeEmployees</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.EmployeePlanModel.FullTimeEmployees</td>
    </tr>
    <tr>
        <td class="paragraph">2. @Text.NonContractEmployees</td>
        <td>@Text.UnitPerson</td>
        <td>@Model.PreviousAnnualPlanModel.EmployeePlanModel.PartTimeEmployees</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.EmployeePlanModel.PartTimeEmployees</td>
    </tr>
    <tr>
        <td class="paragraph">3. @Text.HuntingEquipment</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>a) @Text.Pastures</td>
        <td>@Text.UnitPiece</td>
        <td>@Model.PreviousAnnualPlanModel.HuntEquipmentPlanModel.Pastures</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.HuntEquipmentPlanModel.Pastures</td>
    </tr>
    <tr>
        <td>b) @Text.DeerLickers</td>
        <td>@Text.UnitPiece</td>
        <td>@Model.PreviousAnnualPlanModel.HuntEquipmentPlanModel.DeerLickers</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.HuntEquipmentPlanModel.DeerLickers</td>
    </tr>
    <tr>
        <td>c) @Text.Pulpits</td>
        <td>@Text.UnitPiece</td>
        <td>@Model.PreviousAnnualPlanModel.HuntEquipmentPlanModel.Pulpits</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.HuntEquipmentPlanModel.Pulpits</td>
    </tr>
    <tr>
        <td>d) @Text.Aviaries</td>
        <td>@Text.UnitPiece</td>
        <td>@Model.PreviousAnnualPlanModel.HuntEquipmentPlanModel.Aviaries</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.HuntEquipmentPlanModel.Aviaries</td>
    </tr>
    <tr>
        <td>e) @Text.Farms</td>
        <td>@Text.UnitPiece</td>
        <td>@Model.PreviousAnnualPlanModel.HuntEquipmentPlanModel.Farms</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.HuntEquipmentPlanModel.Farms</td>
    </tr>
    <tr>
        <td>f) @Text.WateringPlaces</td>
        <td>@Text.UnitPiece</td>
        <td>@Model.PreviousAnnualPlanModel.HuntEquipmentPlanModel.WateringPlaces</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.HuntEquipmentPlanModel.WateringPlaces</td>
    </tr>
    <tr>
        <td class="paragraph">4. @Text.TrunkFood</td>
        <td>@Text.UnitHectare</td>
        <td>@Model.PreviousAnnualPlanModel.TrunkFoodPlanModel.Hectare</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.TrunkFoodPlanModel.Hectare</td>
    </tr>
    <tr>
        <td class="paragraph">5. @Text.Barriers</td>
        <td>@Text.UnitKilometers</td>
        <td>@Model.PreviousAnnualPlanModel.BarrierPlanModel.Count</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.BarrierPlanModel.Count</td>
    </tr>
    <tr>
        <td class="paragraph">6. @Text.Fields</td>
        <td>@Text.UnitHectare</td>
        <td>@Model.PreviousAnnualPlanModel.FieldPlanModel.Hectare</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.FieldPlanModel.Hectare</td>
    </tr>
    <tr>
        <td class="paragraph">7. @Text.FoodAndSalt</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>a) @Text.Dry</td>
        <td>@Text.UnitTon</td>
        <td>@Model.PreviousAnnualPlanModel.FodderPlanModel.Dry</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.FodderPlanModel.Dry</td>
    </tr>
    <tr>
        <td>b) @Text.Juicy</td>
        <td>@Text.UnitTon</td>
        <td>@Model.PreviousAnnualPlanModel.FodderPlanModel.Juicy</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.FodderPlanModel.Juicy</td>
    </tr>
    <tr>
        <td>c) @Text.Pithy</td>
        <td>@Text.UnitTon</td>
        <td>@Model.PreviousAnnualPlanModel.FodderPlanModel.Pithy</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.FodderPlanModel.Pithy</td>
    </tr>
    <tr>
        <td>d) @Text.Salt</td>
        <td>@Text.UnitTon</td>
        <td>@Model.PreviousAnnualPlanModel.FodderPlanModel.Salt</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.FodderPlanModel.Salt</td>
    </tr>
    <tr>
        <td class="paragraph">8. @Text.DamagedArea</td>
        <td>@Text.UnitHectare</td>
        <td>@Model.PreviousAnnualPlanModel.DamagedFieldPlanModel.Hectare</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.DamagedFieldPlanModel.Hectare</td>
    </tr>
    <tr>
        <td colspan="6">&nbsp;</td>
    </tr>
    <tr style="border: 0">
        <td colspan="6" style="font-size: x-large; font-weight: bold"> III. Informacja o przychodach ze sprzedaży tusz zwierzyny płowej i kosztach zagospodarowania obwodu.</td>
    </tr>
    <tr>
        <td class="column_number" style="text-align: center">1</td>
        <td class="column_number">2</td>
        <td class="column_number">3</td>
        <td class="column_number">4</td>
        <td class="column_number">5</td>
        <td class="column_number">6</td>
    </tr>
    <tr>
        <td class="paragraph">1. @Text.Costs</td>
        <td>@Text.UnitThousandZlotych</td>
        <td>@Model.PreviousAnnualPlanModel.CostPlanModel.Cost</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.CostPlanModel.Cost</td>
    </tr>
    <tr>
        <td>@Text.Compensation</td>
        <td>@Text.UnitThousandZlotych</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td class="paragraph">2. @Text.CarcassesRevenues</td>
        <td>@Text.UnitThousandZlotych</td>
        <td>@Model.PreviousAnnualPlanModel.CostPlanModel.Revenue</td>
        <td></td>
        <td></td>
        <td>@Model.CurrentAnnualPlanModel.CostPlanModel.Revenue</td>
    </tr>
</table>

<br />
<br />

<h3 style="font-weight: bold">IV. Dane dotyczące zwierząt łownych.</h3>
<h4 style="font-weight: bold">a) zwierzyna gruba</h4>
<table class="table-bordered annualPlanTable" style="text-align: center" id="bigGameTable">
    <tr>
        <th class="short-header" rowspan="4">@Text.GameTypes</th>
        <th colspan="2">@String.Format(Text.PreviousYearGainPlan, DateTime.Now.Year - 1, DateTime.Now.Year)</th>
        <th colspan="4">@String.Format(Text.PreviousYearExecution, DateTime.Now.Year - 1, DateTime.Now.Year)</th>
        <th>@Text.SanitaryLoss</th>
        <th>@Text.GamesColonized10March</th>
        <th>@String.Format(Text.EstimatedNumberGamesColonized10March, DateTime.Now.Year - 1)</th>
        <th>@String.Format(Text.GamesColonizedPlan, DateTime.Now.Year - 1, DateTime.Now.Year)</th>
        <th>@Text.BigGamePlanBeforeHuntSeason</th>
        <th colspan="2">@String.Format(Text.GamesGainPlan, DateTime.Now.Year, DateTime.Now.Year + 1)</th>
        <th colspan="4">@String.Format(Text.MinMaxGameGainPlan, DateTime.Now.Year, DateTime.Now.Year + 1)</th>
    </tr>
    <tr>
        <td class="game-unit" style="text-align: center" rowspan="3">odstrzał szt.</td>
        <td class="game-unit" rowspan="3">odłów szt.</td>
        <td class="game-unit" rowspan="3">ogółem szt.</td>
        <td class="game-unit" colspan="3">w tym szt.</td>
        <td></td>
        <td class="game-unit" rowspan="3">szt.</td>
        <td class="game-unit" rowspan="3">szt.</td>
        <td class="game-unit" rowspan="3">szt.</td>
        <td class="game-unit" rowspan="3">szt.</td>
        <td class="game-unit" rowspan="3">odstrzał szt.</td>
        <td class="game-unit" rowspan="3">odłów szt.</td>
        <td class="game-unit" colspan="2">odstrzał szt.</td>
        <td class="game-unit" colspan="2">odłów szt.</td>
    </tr>
    <tr>
        <td class="game-unit" rowspan="2">odstrzał</td>
        <td class="game-unit" rowspan="2">odłów</td>
        <td class="game-unit" colspan="2">ubytki</td>
        <td class="game-unit" rowspan="2">@Text.Min</td>
        <td class="game-unit" rowspan="2">@Text.Max</td>
        <td class="game-unit" rowspan="2">@Text.Min</td>
        <td class="game-unit" rowspan="2">@Text.Max</td>
    </tr>
    <tr>
        <td class="game-unit">ogółem</td>
        <td class="game-unit">W tym odstrzał sanitarny</td>
    </tr>
    <tr>
        <td class="column_number" style="text-align: center">1</td>
        <td class="column_number">2</td>
        <td class="column_number">3</td>
        <td class="column_number">4</td>
        <td class="column_number">5</td>
        <td class="column_number">6</td>
        <td class="column_number">7</td>
        <td class="column_number">8</td>
        <td class="column_number">9</td>
        <td class="column_number">10</td>
        <td class="column_number">11</td>
        <td class="column_number">12</td>
        <td class="column_number">13</td>
        <td class="column_number">14</td>
        <td class="column_number">15</td>
        <td class="column_number">16</td>
        <td class="column_number">17</td>
        <td class="column_number">18</td>
    </tr>
    @{ int kindCount = 1;}
    @foreach (AnnualPlanKindGameModel gameKindPlanModel in Model.BigGamePlanModel.AnnualPlanKindGameModels)
    {
        <tr>
            <td style="font-weight: bold">@($"{kindCount}. {gameKindPlanModel.KindName} razem")</td>
            <td>@gameKindPlanModel.PreviousHuntPlanCulls</td>
            <td>@gameKindPlanModel.PreviousHuntPlanCatches</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionTotal</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionCulls</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionCatches</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionLosses</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionSanitaryLosses</td>
            <td></td>
            <td>@gameKindPlanModel.GameCountBefore10March</td>
            <td></td>
            <td></td>
            <td>@gameKindPlanModel.CurrentHuntPlanCulls</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCatches</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCullsMin</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCullsMax</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCatchesMin</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCatchesMax</td>
        </tr>
        foreach (AnnualPlanSubKindGameModel gameSubKindPlanModel in gameKindPlanModel.AnnualPlanSubKindGameModels)
        {
        <tr>
            <td>@($"- {gameSubKindPlanModel.SubKindName}")</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanCulls</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanCatches</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionTotal</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionCulls</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionCatches</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionLosses</td>
            <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionSanitaryLosses</td>
            <td></td>
            <td>@gameSubKindPlanModel.GameCountBefore10March</td>
            <td></td>
            <td></td>
            <td>@gameSubKindPlanModel.CurrentHuntPlanCulls</td>
            <td>@gameSubKindPlanModel.CurrentHuntPlanCatches</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
            foreach (AnnualPlanClassGameModel gameClassPlanModel in gameSubKindPlanModel.AnnualPlanClassGameModels)
            {
            <tr>
                <td style="text-align: center">@($"- {gameClassPlanModel.ClassName}")</td>
                <td>@gameClassPlanModel.PreviousHuntPlanCulls</td>
                <td>@gameClassPlanModel.PreviousHuntPlanCatches</td>
                <td>@gameClassPlanModel.PreviousHuntPlanExecutionTotal</td>
                <td>@gameClassPlanModel.PreviousHuntPlanExecutionCulls</td>
                <td>@gameClassPlanModel.PreviousHuntPlanExecutionCatches</td>
                <td>@gameClassPlanModel.PreviousHuntPlanExecutionLosses</td>
                <td>@gameClassPlanModel.PreviousHuntPlanExecutionSanitaryLosses</td>
                <td></td>
                <td>@gameClassPlanModel.GameCountBefore10March</td>
                <td></td>
                <td></td>
                <td>@gameClassPlanModel.CurrentHuntPlanCulls</td>
                <td>@gameClassPlanModel.CurrentHuntPlanCatches</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            }
        }
        kindCount++;
    }
</table>

<br />
<br />

<h4 style="font-weight: bold">b) zwierzyna drobna.</h4>
<table class="table-bordered annualPlanTable" style="text-align: center" id="smallGameTable">
    <tr>
        <th class="medium-header" rowspan="3">@Text.GameTypes</th>
        <th colspan="2">@String.Format(Text.PreviousYearGainPlan, DateTime.Now.Year - 1, DateTime.Now.Year)</th>
        <th colspan="2">@String.Format(Text.PreviousYearExecution, DateTime.Now.Year - 1, DateTime.Now.Year)</th>
        <th>@Text.GamesColonized10March</th>
        <th>@String.Format(Text.EstimatedNumberGamesColonized10March, DateTime.Now.Year - 1)</th>
        <th>@String.Format(Text.GamesColonizedPlan, DateTime.Now.Year - 1, DateTime.Now.Year)</th>
        <th colspan="2">@String.Format(Text.GamesGainPlan, DateTime.Now.Year, DateTime.Now.Year + 1)</th>
        <th colspan="4">@String.Format(Text.MinMaxGameGainPlan, DateTime.Now.Year, DateTime.Now.Year + 1)</th>
    </tr>
    <tr>
        <td style="text-align: center" rowspan="2">odstrzał szt.</td>
        <td rowspan="2">odłów szt.</td>
        <td rowspan="2">odstrzał szt.</td>
        <td rowspan="2">odłów szt.</td>
        <td rowspan="2">szt.</td>
        <td rowspan="2">szt.</td>
        <td rowspan="2">szt.</td>
        <td rowspan="2">odstrzał szt.</td>
        <td rowspan="2">odłów szt.</td>
        <td colspan="2">odstrzał szt.</td>
        <td colspan="2">odłów szt.</td>
    </tr>
    <tr>
        <td>@Text.Min</td>
        <td>@Text.Max</td>
        <td>@Text.Min</td>
        <td>@Text.Max</td>
    </tr>
    <tr>
        <td class="column_number" style="text-align: center">1</td>
        <td class="column_number">2</td>
        <td class="column_number">3</td>
        <td class="column_number">4</td>
        <td class="column_number">5</td>
        <td class="column_number">6</td>
        <td class="column_number">7</td>
        <td class="column_number">8</td>
        <td class="column_number">9</td>
        <td class="column_number">10</td>
        <td class="column_number">11</td>
        <td class="column_number">12</td>
        <td class="column_number">13</td>
        <td class="column_number">14</td>
    </tr>

    @foreach (var gameKindPlanModel in Model.SmallGamePlanModel.AnnualPlanKindGameModels)
    {
        <tr>
            <td style="font-weight: bold">@($"{kindCount}. {gameKindPlanModel.KindName}")</td>
            <td>@gameKindPlanModel.PreviousHuntPlanCulls</td>
            <td>@gameKindPlanModel.PreviousHuntPlanCatches</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionCulls</td>
            <td>@gameKindPlanModel.PreviousHuntPlanExecutionCatches</td>
            <td></td>
            <td>@gameKindPlanModel.GameCountBefore10March</td>
            <td></td>
            <td>@gameKindPlanModel.CurrentHuntPlanCulls</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCatches</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCullsMin</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCullsMax</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCatchesMin</td>
            <td>@gameKindPlanModel.CurrentHuntPlanCatchesMax</td>
        </tr>

        foreach (var gameSubKindPlanModel in gameKindPlanModel.AnnualPlanSubKindGameModels)
        {
            <tr>
                <td style="text-align: center">@($"- {gameSubKindPlanModel.SubKindName}")</td>
                <td>@gameSubKindPlanModel.PreviousHuntPlanCulls</td>
                <td>@gameSubKindPlanModel.PreviousHuntPlanCatches</td>
                <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionCulls</td>
                <td>@gameSubKindPlanModel.PreviousHuntPlanExecutionCatches</td>
                <td></td>
                <td>@gameSubKindPlanModel.GameCountBefore10March</td>
                <td></td>
                <td>@gameSubKindPlanModel.CurrentHuntPlanCulls</td>
                <td>@gameSubKindPlanModel.CurrentHuntPlanCatches</td>
                <td>@gameSubKindPlanModel.CurrentHuntPlanCullsMin</td>
                <td>@gameSubKindPlanModel.CurrentHuntPlanCullsMax</td>
                <td>@gameSubKindPlanModel.CurrentHuntPlanCatchesMin</td>
                <td>@gameSubKindPlanModel.CurrentHuntPlanCatchesMax</td>
            </tr>
        }

        kindCount++;
    }
</table>